<!DOCTYPE html>
<html>
<head>
    <title>Flappy Bird</title>
    <style>
        #game {
            position: relative;
            width: 400px;
            height: 500px;
            border: 1px solid #000;
            margin: 0 auto;
        }

        #bird {
            position: absolute;
            top: 200px;
            left: 50px;
            width: 50px;
            height: 50px;
            background-color: #f00;
        }

        .pipe {
            position: absolute;
            width: 80px;
            bottom: 0;
            background-color: #0f0;
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <h1>Flappy Bird</h1>
    <div id="game">
        <div id="bird"></div>
    </div>
    <script>
        var bird = document.getElementById('bird');
        var game = document.getElementById('game');
        var scoreDisplay = document.getElementById('score');
        var score = 0;
        var levels = 100;
        var currentLevel = 1;

        function getRandomHeight() {
            return Math.floor(Math.random() * 250) + 100;
        }

        function startLevel() {
            bird.style.top = '200px';
            bird.style.left = '50px';
            game.innerHTML = '';
            scoreDisplay.textContent = 'Score: ' + score;
            var levelHeight = getRandomHeight();
            var pipeTop = document.createElement('div');
            var pipeBottom = document.createElement('div');
            pipeTop.className = 'pipe';
            pipeBottom.className = 'pipe';
            pipeTop.style.height = levelHeight + 'px';
            pipeBottom.style.height = (game.offsetHeight - levelHeight - 100) + 'px';
            pipeBottom.style.top = (levelHeight + 100) + 'px';
            game.appendChild(pipeTop);
            game.appendChild(pipeBottom);
            game.addEventListener('click', flap);
            gameLoop();
        }

        function flap() {
            bird.style.top = (bird.offsetTop - 50) + 'px';
        }

        function checkCollision() {
            var birdTop = bird.offsetTop;
            var birdBottom = bird.offsetTop + bird.offsetHeight;
            var pipes = document.getElementsByClassName('pipe');
            var pipeTop = pipes[0];
            var pipeBottom = pipes[1];
            var pipeTopHeight = pipeTop.offsetHeight;
            var pipeBottomTop = pipeBottom.offsetTop;

            if (
                birdBottom > game.offsetHeight ||
                birdTop < pipeTopHeight ||
                (birdBottom > pipeBottomTop && birdTop < (pipeBottomTop + 100))
            ) {
                endGame();
            } else if (birdTop > pipeTopHeight && birdTop < (pipeTopHeight + 10)) {
                score++;
                scoreDisplay.textContent = 'Score: ' + score;
            }
        }

        function endGame() {
            game.innerHTML = '';
            game.removeEventListener('click', flap);
            if (currentLevel === levels) {
                scoreDisplay.textContent = 'Game Over! Final Score: ' + score;
            } else {
                scoreDisplay.textContent = 'Level ' + currentLevel + ' completed. Score: ' + score;
                currentLevel++;
                setTimeout(startLevel, 2000);
            }
            score = 0;
        }

        function gameLoop() {
            var birdTop = bird.offsetTop
